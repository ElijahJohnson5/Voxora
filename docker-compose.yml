services:
  db:
    image: postgres:16-alpine
    environment:
      POSTGRES_USER: voxora
      POSTGRES_PASSWORD: voxora
      POSTGRES_DB: hub
    ports:
      - "5432:5432"
    volumes:
      - db-data:/var/lib/postgresql/data
      - ./scripts/init-db.sql:/docker-entrypoint-initdb.d/init-db.sql:ro

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"

  turn:
    image: coturn/coturn:latest
    ports:
      - "3478:3478/udp"
      - "3478:3478/tcp"
    command:
      - "--use-auth-secret"
      - "--static-auth-secret=dev-turn-secret-do-not-use-in-production"
      - "--realm=voxora.local"
      - "--no-tls"
      - "--no-dtls"

volumes:
  db-data:
